<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Projectile Motion with Propulsion & Air Resistance</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f8fb;
      padding: 20px;
      text-align: center;
    }

    h1 {
      color: #333;
    }

    label {
      display: block;
      margin: 10px auto;
      font-weight: bold;
    }

    input {
      padding: 5px;
      margin: 5px;
    }

    button {
      padding: 10px 20px;
      margin-top: 10px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
    }

    canvas {
      display: block;
      margin: 20px auto;
      border: 2px solid #ccc;
      background: #ffffff;
    }

    #stats {
      margin-top: 20px;
      font-size: 16px;
      text-align: left;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }

    #stats h2 {
      text-align: center;
      color: #444;
    }

    #stats p {
      margin: 6px 0;
    }
  </style>
</head>
<body>

  <h1>2D Projectile Motion Simulator</h1>

  <label>Initial Velocity (m/s):
    <input type="number" id="velocity" value="25">
  </label>

  <label>Launch Angle (degrees):
    <input type="number" id="angle" value="45">
  </label>

  <label>Simulation Time (s):
    <input type="number" id="time" value="10">
  </label>

  <label>Propulsion Acceleration (m/s²):
    <input type="number" id="propulsion" value="5">
  </label>

  <label>Propulsion Duration (s):
    <input type="number" id="boostTime" value="1">
  </label>

  <label>Air Resistance Coefficient (0.01–0.1 recommended):
    <input type="number" id="drag" value="0.02" step="0.01">
  </label>

  <button onclick="startAnimation()">Launch</button>

  <canvas id="canvas" width="800" height="400"></canvas>

  <div id="stats">
    <h2>Stats</h2>
    <p><strong>Distance Traveled:</strong> <span id="distance">-</span> m</p>
    <p><strong>Maximum Height:</strong> <span id="maxHeight">-</span> m</p>
    <p><strong>Final Position:</strong> <span id="finalPosition">-</span></p>
    <p><strong>Final Velocity:</strong> <span id="finalVelocity">-</span> m/s</p>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const floorY = canvas.height - 20;
    const gravity = -9.8;
    const scale = 10;

    let startTime, totalTime;
    let vx, vy, x, y;
    let propulsion, boostTime, dragCoeff;
    let trail = [];
    let maxY = -Infinity;

    function startAnimation() {
      const v0 = parseFloat(document.getElementById('velocity').value);
      const angle = parseFloat(document.getElementById('angle').value) * Math.PI / 180;
      totalTime = parseFloat(document.getElementById('time').value);
      propulsion = parseFloat(document.getElementById('propulsion').value);
      boostTime = parseFloat(document.getElementById('boostTime').value);
      dragCoeff = parseFloat(document.getElementById('drag').value);

      // Initial conditions
      vx = v0 * Math.cos(angle);
      vy = v0 * Math.sin(angle);
      x = 0;
      y = 0;
      startTime = null;
      trail = [];
      maxY = -Infinity;

      // Reset stats
      document.getElementById('distance').textContent = '-';
      document.getElementById('maxHeight').textContent = '-';
      document.getElementById('finalPosition').textContent = '-';
      document.getElementById('finalVelocity').textContent = '-';

      requestAnimationFrame(animate);
    }

    function animate(timestamp) {
      if (!startTime) startTime = timestamp;
      const t = (timestamp - startTime) / 1000;
      const dt = 0.016; // ~60 FPS

      if (t > totalTime || y < 0) {
        showStats();
        return;
      }

      // Apply propulsion if in boost time
      if (t <= boostTime) {
        const a = propulsion;
        vx += a * Math.cos(Math.atan2(vy, vx)) * dt;
        vy += a * Math.sin(Math.atan2(vy, vx)) * dt;
      }

      // Apply gravity
      vy += gravity * dt;

      // Apply air resistance (drag)
      vx -= dragCoeff * vx * dt;
      vy -= dragCoeff * vy * dt;

      // Update position
      x += vx * dt;
      y += vy * dt;

      maxY = Math.max(maxY, y);

      const canvasX = x * scale;
      const canvasY = floorY - (y * scale);

      trail.push({ x: x, y: y });

      // Draw
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw floor
      ctx.beginPath();
      ctx.moveTo(0, floorY);
      ctx.lineTo(canvas.width, floorY);
      ctx.strokeStyle = "#333";
      ctx.lineWidth = 2;
      ctx.stroke();

      // Draw trail
      ctx.beginPath();
      ctx.strokeStyle = 'rgba(0, 100, 255, 0.4)';
      for (let i = 0; i < trail.length; i++) {
        const tx = trail[i].x * scale;
        const ty = floorY - trail[i].y * scale;
        if (i === 0) ctx.moveTo(tx, ty);
        else ctx.lineTo(tx, ty);
      }
      ctx.stroke();

      // Draw ball
      ctx.beginPath();
      ctx.arc(canvasX, canvasY, 10, 0, 2 * Math.PI);
      ctx.fillStyle = 'red';
      ctx.fill();

      requestAnimationFrame(animate);
    }

    function showStats() {
      const distance = x.toFixed(2);
      const height = maxY.toFixed(2);
      const pos = `(${x.toFixed(2)}, ${Math.max(y, 0).toFixed(2)}) m`;
      const finalV = Math.sqrt(vx * vx + vy * vy).toFixed(2);

      document.getElementById('distance').textContent = distance;
      document.getElementById('maxHeight').textContent = height;
      document.getElementById('finalPosition').textContent = pos;
      document.getElementById('finalVelocity').textContent = finalV;
    }
  </script>

</body>
</html>
